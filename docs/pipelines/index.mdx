---
sidebar_position: 1000
title: "âš¡ Pipelines"
---

<p align="center">
  <a href="#">
    <img src="/images/pipelines/header.png" alt="Pipelines Logo" />
  </a>
</p>

# Pipelinesï¼šUI æ— å…³çš„ OpenAI API æ’ä»¶åŒ–æ¡†æ¶

:::tip
å¦‚æœä½ åªæ˜¯æƒ³æ·»åŠ å¯¹ Anthropic ç­‰å…¶ä»–æä¾›å•†çš„æ”¯æŒæˆ–åŸºæœ¬è¿‡æ»¤åŠŸèƒ½ï¼Œä½ å¯èƒ½ä¸éœ€è¦ Pipelinesã€‚å¯¹äºè¿™äº›åœºæ™¯ï¼Œ[Open WebUI Functions](/features/plugin/functions) æ˜¯æ›´å¥½çš„é€‰æ‹©â€”â€”å®ƒæ˜¯å†…ç½®çš„ï¼Œæ›´ä¾¿æ·ï¼Œé…ç½®ä¹Ÿæ›´ç®€å•ã€‚ä¸è¿‡ï¼Œå½“ä½ éœ€è¦å¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œè¿è¡Œå¤§å‹æ¨¡å‹æˆ–å¤æ‚é€»è¾‘ï¼‰å¹¶å¸Œæœ›ä»ä¸» Open WebUI å®ä¾‹ä¸­åˆ†ç¦»å‡ºæ¥ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§æ—¶ï¼ŒPipelines å°±èƒ½å‘æŒ¥ä½œç”¨äº†ã€‚
:::

æ¬¢è¿ä½¿ç”¨ **Pipelines**ï¼Œè¿™æ˜¯ä¸€ä¸ª [Open WebUI](https://github.com/open-webui) é¡¹ç›®ã€‚Pipelines ä¸ºæ‰€æœ‰æ”¯æŒ OpenAI API è§„èŒƒçš„ UI å®¢æˆ·ç«¯æä¾›æ¨¡å—åŒ–ã€å¯å®šåˆ¶çš„å·¥ä½œæµç¨‹ï¼Œè€Œä¸”åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ï¼åªéœ€å‡ è¡Œä»£ç ï¼Œä½ å°±èƒ½è½»æ¾æ‰©å±•åŠŸèƒ½ã€é›†æˆç‰¹å®šé€»è¾‘å¹¶åˆ›å»ºåŠ¨æ€å·¥ä½œæµã€‚

## ğŸš€ ä¸ºä»€ä¹ˆé€‰æ‹© Pipelinesï¼Ÿ

- **æ— é™å¯èƒ½æ€§ï¼š** è½»æ¾æ·»åŠ è‡ªå®šä¹‰é€»è¾‘å¹¶é›†æˆ Python åº“ï¼Œä» AI æ™ºèƒ½ä½“åˆ°æ™ºèƒ½å®¶å±… APIï¼Œåº”æœ‰å°½æœ‰ã€‚
- **æ— ç¼é›†æˆï¼š** å…¼å®¹æ‰€æœ‰æ”¯æŒ OpenAI API è§„èŒƒçš„ UI/å®¢æˆ·ç«¯ã€‚ï¼ˆç›®å‰ä»…æ”¯æŒç®¡é“ç±»å‹çš„ pipelinesï¼›è¿‡æ»¤å™¨ç±»å‹éœ€è¦å®¢æˆ·ç«¯æ”¯æŒ Pipelinesï¼‰ã€‚
- **è‡ªå®šä¹‰é’©å­ï¼ˆhooksï¼‰ï¼š** æ„å»ºå’Œé›†æˆè‡ªå®šä¹‰ç®¡é“ã€‚

### ä½¿ç”¨ç¤ºä¾‹ï¼š

- [**å‡½æ•°è°ƒç”¨ç®¡é“**](https://github.com/open-webui/pipelines/blob/main/examples/filters/function_calling_filter_pipeline.py)ï¼šè½»æ¾å¤„ç†å‡½æ•°è°ƒç”¨ï¼Œç”¨è‡ªå®šä¹‰é€»è¾‘å¢å¼ºåº”ç”¨ç¨‹åºã€‚
- [**è‡ªå®šä¹‰æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç®¡é“**](https://github.com/open-webui/pipelines/blob/main/examples/pipelines/rag/llamaindex_pipeline.py)ï¼šå®ç°ç¬¦åˆä½ éœ€æ±‚çš„é«˜çº§æ£€ç´¢å¢å¼ºç”Ÿæˆç®¡é“ã€‚
- [**åŸºäº Langfuse çš„æ¶ˆæ¯ç›‘æ§**](https://github.com/open-webui/pipelines/blob/main/examples/filters/langfuse_filter_pipeline.py)ï¼šä½¿ç”¨ Langfuse å®æ—¶ç›‘æ§å’Œåˆ†ææ¶ˆæ¯äº¤äº’ã€‚
- [**é™æµè¿‡æ»¤å™¨**](https://github.com/open-webui/pipelines/blob/main/examples/filters/rate_limit_filter_pipeline.py)ï¼šæ§åˆ¶è¯·æ±‚æµé‡ï¼Œé˜²æ­¢è¶…å‡ºè®¿é—®é™åˆ¶ã€‚
- [**åŸºäº LibreTranslate çš„å®æ—¶ç¿»è¯‘è¿‡æ»¤å™¨**](https://github.com/open-webui/pipelines/blob/main/examples/filters/libretranslate_filter_pipeline.py)ï¼šå°†å®æ—¶ç¿»è¯‘æ— ç¼é›†æˆåˆ°å¤§è¯­è¨€æ¨¡å‹äº¤äº’ä¸­ã€‚
- [**ä¸è‰¯ä¿¡æ¯è¿‡æ»¤å™¨**](https://github.com/open-webui/pipelines/blob/main/examples/filters/detoxify_filter_pipeline.py)ï¼šå®ç°è¿‡æ»¤å™¨ï¼Œæœ‰æ•ˆæ£€æµ‹å’Œå¤„ç†ä¸è‰¯ä¿¡æ¯ã€‚
- **æ›´å¤šå¯èƒ½ï¼**ï¼šå€ŸåŠ© Pipelines å’Œ Pythonï¼Œä½ çš„åˆ›æ„å°±æ˜¯æé™ã€‚[æŸ¥çœ‹æˆ‘ä»¬çš„è„šæ‰‹æ¶](https://github.com/open-webui/pipelines/blob/main/examples/scaffolds)ï¼Œå¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼Œäº†è§£å¦‚ä½•ç®€åŒ–å¼€å‘æµç¨‹ï¼

## ğŸ”§ å·¥ä½œåŸç†

<p align="center">
  <a href="#">
    <img src="/images/pipelines/workflow.png" alt="Pipelines Workflow" />
  </a>
</p>

å°† Pipelines ä¸ä»»ä½•å…¼å®¹ OpenAI API çš„ UI å®¢æˆ·ç«¯é›†æˆéå¸¸ç®€å•ã€‚å¯åŠ¨ä½ çš„ Pipelines å®ä¾‹ï¼Œå°†å®¢æˆ·ç«¯çš„ OpenAI URL è®¾ç½®ä¸º Pipelines URLã€‚è¿™æ ·å°±å®Œæˆäº†ï¼ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ä»»ä½• Python åº“æ¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚

## âš¡ ä½¿ç”¨ Docker å¿«é€Ÿå¼€å§‹

:::warning
Pipelines æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œä»»æ„ä»£ç çš„æ’ä»¶ç³»ç»Ÿâ€”â€”**è¯·å‹¿ä»ä¸å¯ä¿¡æ¥æºè·å–ç®¡é“**ã€‚
:::

ä½¿ç”¨ Docker è¿›è¡Œå¿«é€Ÿè®¾ç½®ï¼š

1. **è¿è¡Œ Pipelines å®¹å™¨ï¼š**

   ```sh
   docker run -d -p 9099:9099 --add-host=host.docker.internal:host-gateway -v pipelines:/app/pipelines --name pipelines --restart always ghcr.io/open-webui/pipelines:main
   ```

2. **è¿æ¥åˆ° Open WebUIï¼š**

   - åœ¨ Open WebUI ä¸­è¿›å…¥ **ç®¡ç†é¢æ¿ > è®¾ç½® > è¿æ¥** éƒ¨åˆ†ã€‚
   - åœ¨æ­¤é¡µé¢ï¼Œç‚¹å‡» `+` æŒ‰é’®æ·»åŠ æ–°è¿æ¥ã€‚
   - å°† API URL è®¾ç½®ä¸º `http://localhost:9099`ï¼ŒAPI å¯†é’¥è®¾ç½®ä¸º `0p3n-w3bu!`ã€‚
   - æ·»åŠ å¹¶éªŒè¯ pipelines è¿æ¥åï¼Œä½ ä¼šåœ¨å·²æ·»åŠ è¿æ¥çš„ API Base URL å­—æ®µä¸­çœ‹åˆ°ä¸€ä¸ªå›¾æ ‡ã€‚é¼ æ ‡æ‚¬åœæ—¶ï¼Œè¯¥å›¾æ ‡æ˜¾ç¤ºä¸º `Pipelines`ã€‚æ­¤æ—¶ä½ çš„ç®¡é“å·²ç»æ¿€æ´»ã€‚

:::info
å¦‚æœä½ çš„ Open WebUI è¿è¡Œåœ¨ Docker å®¹å™¨ä¸­ï¼Œè¯·å°† API URL ä¸­çš„ `localhost` æ›¿æ¢ä¸º `host.docker.internal`ã€‚
:::

3. **ç®¡ç†é…ç½®ï¼š**

   - åœ¨ç®¡ç†é¢æ¿ä¸­ï¼Œè½¬åˆ° **ç®¡ç†é¢æ¿ > è®¾ç½® > Pipelines** æ ‡ç­¾é¡µã€‚
   - é€‰æ‹©æ‰€éœ€ç®¡é“ï¼Œç›´æ¥åœ¨ WebUI ä¸­è°ƒæ•´ç®¡é“å‚æ•°ã€‚

:::tip
å¦‚æœæ— æ³•è¿æ¥ï¼Œå¾ˆå¯èƒ½æ˜¯ Docker ç½‘ç»œé…ç½®é—®é¢˜ã€‚æˆ‘ä»¬å»ºè®®ä½ è‡ªè¡Œæ’æŸ¥ï¼Œå¹¶åœ¨è®¨è®ºåŒºåˆ†äº«ä½ çš„è§£å†³æ–¹æ¡ˆã€‚
:::

å¦‚æœéœ€è¦å®‰è£…å¸¦æœ‰é¢å¤–ä¾èµ–çš„è‡ªå®šä¹‰ç®¡é“ï¼š

- **æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š**

  ```sh
  docker run -d -p 9099:9099 --add-host=host.docker.internal:host-gateway -e PIPELINES_URLS="https://github.com/open-webui/pipelines/blob/main/examples/filters/detoxify_filter_pipeline.py" -v pipelines:/app/pipelines --name pipelines --restart always ghcr.io/open-webui/pipelines:main
  ```

å¦å¤–ï¼Œå¦‚æœç®¡é“æ²¡æœ‰é¢å¤–ä¾èµ–ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç®¡ç†è®¾ç½®ä¸­å¤åˆ¶ç²˜è´´ç®¡é“ URL æ¥å®‰è£…ã€‚

é…ç½®å®Œæˆï¼ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ Pipelines æ„å»ºå¯å®šåˆ¶çš„ AI é›†æˆæ–¹æ¡ˆäº†ã€‚

## ğŸ“¦ å®‰è£…å’Œè®¾ç½®

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€å§‹ä½¿ç”¨ Pipelinesï¼š

1. **ç¡®ä¿å®‰è£… Python 3.11ã€‚** è¿™æ˜¯ç›®å‰å”¯ä¸€å®˜æ–¹æ”¯æŒçš„ Python ç‰ˆæœ¬ã€‚
2. **å…‹éš† Pipelines ä»“åº“ï¼š**

   ```sh
   git clone https://github.com/open-webui/pipelines.git
   cd pipelines
   ```

3. **å®‰è£…ä¾èµ–é¡¹ï¼š**

   ```sh
   pip install -r requirements.txt
   ```

4. **å¯åŠ¨ Pipelines æœåŠ¡å™¨ï¼š**

   ```sh
   sh ./start.sh
   ```

æœåŠ¡å™¨å¯åŠ¨åï¼Œå°†å®¢æˆ·ç«¯çš„ OpenAI URL è®¾ç½®ä¸º Pipelines URLã€‚è¿™æ ·å°±èƒ½è§£é” Pipelines çš„å…¨éƒ¨åŠŸèƒ½ï¼Œé›†æˆä»»ä½• Python åº“å¹¶åˆ›å»ºæ»¡è¶³ä½ éœ€æ±‚çš„è‡ªå®šä¹‰å·¥ä½œæµã€‚

## ğŸ“‚ ç›®å½•ç»“æ„å’Œç¤ºä¾‹

`/pipelines` ç›®å½•æ˜¯æ•´ä¸ªè®¾ç½®çš„æ ¸å¿ƒã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ–°æ¨¡å—ã€è‡ªå®šä¹‰ç°æœ‰æ¨¡å—å¹¶ç®¡ç†å·¥ä½œæµã€‚æœåŠ¡å™¨å¯åŠ¨æ—¶ä¼š**è‡ªåŠ¨åŠ è½½** `/pipelines` ç›®å½•ä¸­çš„æ‰€æœ‰ç®¡é“ã€‚

ä½ å¯ä»¥é€šè¿‡è®¾ç½® `PIPELINES_DIR` ç¯å¢ƒå˜é‡å°†æ­¤ç›®å½•ä» `/pipelines` æ›´æ”¹ä¸ºå…¶ä»–ä½ç½®ã€‚

### é›†æˆç¤ºä¾‹

åœ¨ `https://github.com/open-webui/pipelines/blob/main/examples` ç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°å„ç§é›†æˆç¤ºä¾‹ã€‚è¿™äº›ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•é›†æˆä¸åŒåŠŸèƒ½ï¼Œä¸ºæ„å»ºè‡ªå®šä¹‰ç®¡é“æä¾›äº†åŸºç¡€ã€‚

## ğŸ‰ æŒç»­å‘å±•ä¸­

æˆ‘ä»¬æ­£åœ¨ä¸æ–­è¿›æ­¥ï¼æˆ‘ä»¬éå¸¸æœŸå¾…å¬åˆ°ä½ çš„åé¦ˆï¼Œäº†è§£å“ªäº›é’©å­å’ŒåŠŸèƒ½æœ€é€‚åˆä½ çš„ä½¿ç”¨åœºæ™¯ã€‚éšæ—¶åŠ å…¥æˆ‘ä»¬çš„ Open WebUI ç¤¾åŒºï¼

æˆ‘ä»¬çš„æ„¿æ™¯æ˜¯å°† **Pipelines** æ‰“é€ æˆ AI ç•Œé¢ **Open WebUI** çš„ç»ˆææ’ä»¶åŒ–æ¡†æ¶ã€‚è®¾æƒ³ **Open WebUI** æ˜¯ AI ç•Œé¢é¢†åŸŸçš„ WordPressï¼Œè€Œ **Pipelines** åˆ™æ˜¯å®ƒä¸°å¯Œå¤šæ ·çš„æ’ä»¶ç”Ÿæ€ã€‚æ¬¢è¿åŠ å…¥è¿™ä¸ªæ¿€åŠ¨äººå¿ƒçš„æ—…ç¨‹ï¼ğŸŒ
