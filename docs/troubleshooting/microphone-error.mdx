---
sidebar_position: 2
title: "🎙️ 麦克风访问问题解决"
---

对于依赖音频输入功能的应用场景，确保系统能够安全、正确地访问麦克风设备是一项基础要求。本指南将详细说明麦克风权限的管理方法和问题解决方案，尤其关注安全环境下的最佳实践。

## 安全环境要求说明 🔒

基于 Web 安全策略，麦克风访问权限仅授予以下两类页面：
1. 使用 HTTPS 安全协议的网站
2. 通过 `localhost` 访问的本地页面

这一限制机制旨在确保所有音频数据都经由加密通道进行传输，防止信息泄露。

## 常见权限问题 🚫

主流浏览器均实施了严格的麦克风访问控制策略：
- Chromium 内核浏览器：Chrome、Brave、Microsoft Edge、Opera、Vivaldi
- Gecko 内核浏览器：Firefox

这些浏览器默认会阻止非 HTTPS 网址访问麦克风。此类限制在局域网环境中尤为常见，例如使用移动设备访问局域网内的开发服务器时。

### 非 HTTPS 环境的解决方案

1. **【推荐方案】配置 HTTPS 访问：**
   - 强烈建议在服务器端启用 HTTPS 支持
   - 这不仅解决麦克风访问问题，还能全面保障数据传输安全

2. **【谨慎使用】修改浏览器安全设置：**
   - ⚠️ 警告：此方法仅适用于开发测试环境
   - 通过浏览器配置强制信任特定非安全源
   - 具体配置步骤：

   #### Chromium 系浏览器配置
   1. 导航至：`chrome://flags/#unsafely-treat-insecure-origin-as-secure`
   2. 添加目标网址（示例：`http://192.168.1.35:3000`）
   3. 重启浏览器以应用更改

   #### Firefox 浏览器配置
   1. 导航至：`about:config`
   2. 搜索或新建：`dom.securecontext.allowlist`
   3. 设置信任地址（示例：`http://127.0.0.1:8080`）
   4. 多个地址使用英文逗号分隔

### ⚠️ 重要安全警告 🚨

修改浏览器安全设置虽然能够快速解决访问限制，但会带来以下风险：
- 绕过核心安全机制
- 增加设备被攻击风险
- 可能导致敏感数据泄露

在生产环境中，务必采用标准的 HTTPS 方案，确保通信安全。

---

通过合理配置上述安全措施，你可以在保障数据安全的前提下，实现应用程序对麦克风的可靠访问。如遇其他问题，建议优先检查网络安全配置。
