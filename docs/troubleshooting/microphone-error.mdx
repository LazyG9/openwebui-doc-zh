---
sidebar_position: 2
title: "🎙️ 麦克风访问故障排除"
---

确保你的应用程序具有适当的麦克风访问权限对于依赖音频输入的功能至关重要。本指南介绍如何管理和排除麦克风权限问题，特别是在安全上下文中。

## 理解安全上下文 🔒

出于安全原因，麦克风访问仅限于通过 HTTPS 或从 `localhost` 本地提供的页面。这一要求旨在通过确保数据通过安全通道传输来保护你的数据。

## 常见权限问题 🚫

Chrome、Brave、Microsoft Edge、Opera 和 Vivaldi 等浏览器，以及 Firefox，都会限制对非 HTTPS URL 的麦克风访问。这通常在从同一网络内的其他设备访问站点时成为问题（例如，使用手机访问桌面服务器）。以下是管理这些问题的方法：

### 非 HTTPS 连接的解决方案

1. **设置 HTTPS：**
   - 强烈建议配置你的服务器以支持 HTTPS。这不仅解决了权限问题，还增强了数据传输的安全性。

2. **临时浏览器标志（谨慎使用）：**
   - 这些设置强制你的浏览器将某些不安全的 URL 视为安全。这对开发目的有用，但会带来重大安全风险。以下是如何为主要浏览器调整这些设置：

   #### 基于 Chromium 的浏览器（如 Chrome、Brave）
   - 打开 `chrome://flags/#unsafely-treat-insecure-origin-as-secure`。
   - 输入你的非 HTTPS 地址（例如 `http://192.168.1.35:3000`）。
   - 重启浏览器以应用更改。

   #### 基于 Firefox 的浏览器
   - 打开 `about:config`。
   - 搜索并修改（或创建）字符串值 `dom.securecontext.allowlist`。
   - 添加你的 IP 地址，用逗号分隔（例如 `http://127.0.0.1:8080`）。

### 注意事项和风险 🚨

虽然浏览器标志提供了快速修复方案，但它们会绕过重要的安全检查，这可能使你的设备和数据面临漏洞风险。在规划生产环境时，始终优先考虑适当的安全措施。

通过遵循这些最佳实践，你可以确保你的应用程序在维护数据安全性和完整性的同时正确访问麦克风。