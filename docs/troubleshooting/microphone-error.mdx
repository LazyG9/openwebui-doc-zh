---
sidebar_position: 2
title: "🎙️ 麦克风访问问题解决指南"
---

要使用依赖音频输入的功能，确保应用程序具有正确的麦克风访问权限至关重要。本指南将介绍如何管理麦克风权限并解决相关问题，特别是在涉及安全上下文时。

## 了解安全上下文（Secure Context）🔒

出于安全考虑，麦克风访问权限仅限于以下两种情况：
- 通过HTTPS协议提供服务的页面
- 通过`localhost`访问的本地页面

这项限制的目的是确保你的音频数据始终通过安全通道传输。

## 常见权限问题 🚫

Chrome、Brave、Microsoft Edge、Opera和Vivaldi等Chromium系浏览器，以及Firefox浏览器，都会限制非HTTPS URL的麦克风访问权限。这个问题通常出现在当你使用同一网络内的其他设备访问服务时（比如用手机访问运行在电脑上的服务器）。下面是几种解决方案：

### 非HTTPS连接的解决方案

1. **配置HTTPS（推荐）：**
   - 我们强烈建议为你的服务器配置HTTPS支持。这不仅能解决麦克风访问的权限问题，还能全面提升数据传输的安全性。

2. **修改浏览器标志（仅用于开发测试）：**
   - 通过这些设置，可以强制浏览器将特定的非安全URL视为安全。这种方法适用于开发环境，但存在安全风险，请谨慎使用。具体设置方法如下：

   #### Chromium系浏览器（Chrome、Brave等）
   - 访问`chrome://flags/#unsafely-treat-insecure-origin-as-secure`
   - 输入你的非HTTPS地址（例如：`http://192.168.1.35:3000`）
   - 重启浏览器使设置生效

   #### Firefox浏览器
   - 访问`about:config`
   - 找到并修改（如果不存在则创建）字符串值`dom.securecontext.allowlist`
   - 添加你的IP地址，多个地址用逗号分隔（例如：`http://127.0.0.1:8080`）

### 重要安全提醒 🚨

虽然修改浏览器标志可以快速解决问题，但这种方法会绕过重要的安全检查，可能会使你的设备和数据面临安全风险。特别是在规划生产环境时，应该始终优先考虑正规的安全措施。

遵循以上最佳实践，你可以在确保数据安全的同时，让应用程序正常访问麦克风功能。记住，安全永远是第一位的。