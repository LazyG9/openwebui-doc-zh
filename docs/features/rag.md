---
sidebar_position: 11
title: "🔎 检索增强生成 (RAG)"
---

检索增强生成（RAG）是一项前沿技术，通过整合来自不同来源的上下文来增强聊天机器人的对话能力。它通过从各种来源（如本地和远程文档、网页内容，甚至包括 YouTube 视频等多媒体源）检索相关信息来工作。检索到的文本随后与预定义的 RAG 模板结合，并添加到用户的提示词之前，从而提供更加明智和具有上下文相关性的响应。

RAG 的一个主要优势在于其能够访问和整合来自各种来源的信息，使其成为复杂对话场景的理想解决方案。例如，当用户询问与特定文档或网页相关的问题时，RAG 可以检索并将该来源的相关信息整合到聊天响应中。RAG 还可以检索和整合来自多媒体源（如 YouTube 视频）的信息。通过分析这些视频的字幕或说明文字，RAG 可以提取相关信息并将其整合到聊天响应中。

## 本地和远程 RAG 集成

本地文档必须首先通过工作区区域的文档部分上传，才能使用 `#` 符号在查询前访问它们。点击聊天框上方出现的格式化 URL。选择后，"发送消息"上方会出现一个文档图标，表示检索成功。

您还可以通过在提示词前加上 `#`，然后跟上 URL 的方式将文档加载到工作区域。这可以帮助将网页内容直接整合到您的对话中。

## 用于 RAG 的网页搜索

对于网页内容集成，在聊天中以 `#` 开始查询，后跟目标 URL。点击聊天框上方出现的格式化 URL。选择后，"发送消息"上方会出现一个文档图标，表示检索成功。如果可能的话，Open WebUI 会获取并解析 URL 中的信息。

:::tip
网页通常包含导航和页脚等额外信息。为获得更好的结果，请链接到原始或阅读器友好版本的页面。
:::

## RAG 模板自定义

可以从 `管理面板` > `设置` > `文档` 菜单自定义 RAG 模板。

## RAG 嵌入支持

可以直接在 `管理面板` > `设置` > `文档` 菜单中更改 RAG 嵌入模型。此功能支持 Ollama 和 OpenAI 模型，使您能够根据需求增强文档处理。

## RAG 功能中的引用

RAG 功能允许用户轻松追踪提供给大语言模型的文档上下文，并添加参考点的引用。这确保了在聊天中使用外部来源时的透明度和可追溯性。

## 增强的 RAG 管道

我们的 RAG 嵌入功能的可切换混合搜索子功能通过 `BM25` 增强了 RAG 功能，使用 `CrossEncoder` 进行重新排序，并具有可配置的相关性分数阈值。这为您的特定用例提供了更精确和定制化的 RAG 体验。

## YouTube RAG 管道

专门用于通过视频 URL 总结 YouTube 视频的 RAG 管道可以直接与视频转录内容进行流畅交互。这项创新功能允许您将视频内容整合到聊天中，进一步丰富您的对话体验。

## 文档解析

各种解析器可以提取本地和远程文档的内容。更多信息，请参见 [`get_loader`](https://github.com/open-webui/open-webui/blob/2fa94956f4e500bf5c42263124c758d8613ee05e/backend/apps/rag/main.py#L328) 函数。

## Google Drive 集成

当与启用了 Google Picker API 和 Google Drive API 的 Google Cloud 项目配对时，此功能允许用户直接从聊天界面访问其 Drive 文件，并上传文档、幻灯片、表格等作为聊天的上下文。可以在 `管理面板` > `设置` > `文档` 菜单中启用。必须设置 [`GOOGLE_DRIVE_API_KEY 和 GOOGLE_DRIVE_CLIENT_ID`](https://github.com/open-webui/docs/blob/main/docs/getting-started/advanced-topics/env-configuration.md) 环境变量才能使用。
