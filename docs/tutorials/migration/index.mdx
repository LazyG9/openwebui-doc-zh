---
sidebar_position: 5
title: "ğŸ”„ è¿ç§»"
---

## ä»å†…éƒ¨ LiteLLM è¿ç§»åˆ°å¤–éƒ¨ LiteLLM

Open WebUI çš„æ—©æœŸç‰ˆæœ¬ï¼ˆ0.2 ä¹‹å‰ï¼‰åœ¨å†…éƒ¨è¿è¡Œ `litellm`ã€‚ä¸ºäº†æé«˜æ¨¡å—åŒ–å’Œçµæ´»æ€§ï¼Œæˆ‘ä»¬å»ºè®®åœ¨ç‹¬ç«‹çš„å®¹å™¨ä¸­è¿è¡Œ `litellm`ã€‚æœ¬æŒ‡å—å°†æŒ‡å¯¼æ‚¨å®Œæˆè¿ç§»è¿‡ç¨‹ã€‚

### 1. ä¸‹è½½æ‚¨çš„ `config.yaml` æ–‡ä»¶

åœ¨è¿›è¡Œä»»ä½•æ›´æ”¹ä¹‹å‰ï¼Œä» Open WebUI ç®¡ç†è®¾ç½®çª—å£ä¸‹è½½æ‚¨ç°æœ‰çš„ `config.yaml` æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶åŒ…å«æ‚¨å½“å‰çš„ `litellm` é…ç½®ã€‚

![LiteLLM config.yaml ä¸‹è½½](/img/migration_litellm_config.png)

### 2. è¿è¡Œç‹¬ç«‹çš„ `litellm` å®¹å™¨

ä½¿ç”¨ä»¥ä¸‹ `docker run` å‘½ä»¤å¯åŠ¨ä¸“ç”¨çš„ `litellm` å®¹å™¨ï¼š

```bash
docker run -d \
  -p 4000:4000 \
  --name litellm \
  -v ./config.yaml:/app/config.yaml \
  -e LITELLM_MASTER_KEY=your_secret_key \
  --restart always \
  ghcr.io/berriai/litellm:main-latest \
  --config /app/config.yaml --port 4000
```

- å°† `./config.yaml` æ›¿æ¢ä¸ºå·²ä¸‹è½½çš„ `config.yaml` æ–‡ä»¶çš„å®é™…è·¯å¾„ã€‚
- ä¸º `LITELLM_MASTER_KEY` è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„ API å¯†é’¥ã€‚è¿™ç¡®ä¿äº†å¯¹æ‚¨çš„ `litellm` å®ä¾‹çš„å—æ§è®¿é—®ã€‚

### 3. å°† `litellm` è¿æ¥åˆ° Open WebUI

ä¸€æ—¦ `litellm` å®¹å™¨å¯åŠ¨å¹¶è¿è¡Œï¼š

1. è¿›å…¥ Open WebUI è®¾ç½®ã€‚
2. åœ¨"è¿æ¥"ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„"OpenAI"è¿æ¥ã€‚
3. å°†åŸºç¡€ URL è®¾ç½®ä¸º `http://host.docker.internal:4000/v1`ï¼ˆå¦‚æœ‰å¿…è¦ï¼Œè°ƒæ•´ç«¯å£ï¼‰ã€‚
4. å¯¹äº API å¯†é’¥ï¼Œä½¿ç”¨æ‚¨åœ¨æ­¥éª¤ 2 ä¸­å®šä¹‰çš„ `LITELLM_MASTER_KEY` å€¼ï¼ˆä¾‹å¦‚ï¼Œ`your_secret_key`ï¼‰ã€‚

æ­å–œï¼æ‚¨å·²æˆåŠŸè¿ç§»åˆ°å¤–éƒ¨ `litellm` è®¾ç½®ï¼Œæé«˜äº† Open WebUI å®‰è£…çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## å°†å†…å®¹ä» Ollama WebUI è¿ç§»åˆ° Open WebUI

ç”±äºæœ€è¿‘ä» [Ollama WebUI æ›´åä¸º Open WebUI](https://github.com/open-webui/open-webui/discussions/602)ï¼Œdocker é•œåƒå·²è¢«é‡å‘½åã€‚å¯¹äºä¹‹å‰ä½¿ç”¨ Ollama WebUI å¹¶æƒ³å¼€å§‹ä½¿ç”¨æ–°é•œåƒçš„ç”¨æˆ·ï¼Œéœ€è¦æ‰§è¡Œé¢å¤–çš„æ­¥éª¤ã€‚

## æ›´æ–°åˆ° Open WebUI è€Œä¸ä¿ç•™æ•°æ®

å¦‚æœæ‚¨æƒ³æ›´æ–°åˆ°æ–°é•œåƒä½†ä¸æƒ³ä¿ç•™ä»»ä½•ä»¥å‰çš„æ•°æ®ï¼ˆå¦‚å¯¹è¯ã€æç¤ºã€æ–‡æ¡£ç­‰ï¼‰ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

:::danger

æ‰§è¡Œè¿™äº›æ­¥éª¤å°†åˆ é™¤æ‰€æœ‰å½“å‰é…ç½®é€‰é¡¹ã€èŠå¤©å†å²ç­‰ã€‚åªæœ‰ LLM æ¨¡å‹ä¼šè¢«ä¿ç•™

:::

```bash
docker rm -f ollama-webui
docker pull ghcr.io/open-webui/open-webui:main
[æ’å…¥æ‚¨ä½¿ç”¨æ–° Docker é•œåƒåç§°å®‰è£…æ—¶ä½¿ç”¨çš„ç­‰æ•ˆå‘½ä»¤]
docker volume rm ollama-webui
```

ä¾‹å¦‚ï¼Œå¯¹äºæœ¬åœ°å®‰è£…ï¼Œå‘½ä»¤æ˜¯ `docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main`ã€‚æœ‰å…³å…¶ä»–å®‰è£…å‘½ä»¤ï¼Œè¯·æŸ¥çœ‹æœ¬ README æ–‡æ¡£çš„ç›¸å…³éƒ¨åˆ†ã€‚

## æ›´æ–°åˆ° Open WebUI å¹¶ä¿ç•™æ•°æ®

å¦‚æœæ‚¨æƒ³æ›´æ–°åˆ°æ–°é•œåƒå¹¶è¿ç§»æ‰€æœ‰ä»¥å‰çš„è®¾ç½®ï¼ˆå¦‚å¯¹è¯ã€æç¤ºã€æ–‡æ¡£ç­‰ï¼‰ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```bash
docker rm -f ollama-webui
docker pull ghcr.io/open-webui/open-webui:main
# åˆ›å»ºæ–°å·å¹¶ä½¿ç”¨ä¸´æ—¶å®¹å™¨ä»ä¸€ä¸ªå·å¤åˆ¶åˆ°å¦ä¸€ä¸ªå·ï¼Œå‚è§ https://github.com/moby/moby/issues/31154#issuecomment-360531460
docker volume create --name open-webui
docker run --rm -v ollama-webui:/from -v open-webui:/to alpine ash -c "cd /from ; cp -av . /to"
[æ’å…¥æ‚¨ä½¿ç”¨æ–° Docker é•œåƒåç§°å®‰è£…æ—¶ä½¿ç”¨çš„ç­‰æ•ˆå‘½ä»¤]
```

ä¸€æ—¦æ‚¨éªŒè¯æ‰€æœ‰æ•°æ®éƒ½å·²è¿ç§»ï¼Œå°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤æ—§å·ï¼š

```bash
docker volume rm ollama-webui
```

### ä»æœ¬åœ° Git ä»“åº“è¿ç§»

å¦‚æœæ‚¨æ˜¯ä» git å®‰è£…çš„ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸­ä½¿ç”¨äº† `docker compose up`ï¼Œæ‚¨çš„å·åå°†ä»¥æ–‡ä»¶å¤¹åä¸ºå‰ç¼€ã€‚
å› æ­¤ï¼Œå¦‚æœæ‚¨çš„ OpenWebUI è·¯å¾„æ˜¯ï¼š`/home/myserver/ollama-webui/`ï¼Œå·åå°†æ˜¯ "ollama-webui_open-webui" å’Œ "ollama-webui_ollama"ã€‚

è¦å°†å†…å®¹å¤åˆ¶åˆ°å¸¸è§„çš„ docker å®‰è£…ä¸­ï¼Œæ‚¨å¯ä»¥è¿è¡Œç±»ä¼¼çš„è¿ç§»å‘½ä»¤ã€‚åœ¨æˆ‘ä»¬çš„ç‰¹å®šæƒ…å†µä¸‹ï¼Œå‘½ä»¤å°†æ˜¯ï¼š
```bash
docker rm -f open-webui
docker rm -f ollama
docker pull ghcr.io/open-webui/open-webui:main
docker pull ghcr.io/open-webui/open-webui:ollama
docker volume create --name open-webui
docker volume create --name ollama
docker run --rm -v ollama-webui_open-webui:/from -v open-webui:/to alpine ash -c "cd /from ; cp -av . /to"
docker run --rm -v ollama-webui_ollama:/from -v ollama:/to alpine ash -c "cd /from ; cp -av . /to"
```

æ ¹æ®æ‚¨æ˜¯å¦å·²å®‰è£… ollamaï¼Œæˆ–è€…æ˜¯å¦å·²ç»æœ‰ç›¸åŒçš„å·åï¼ŒæŸäº›å‘½ä»¤**å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯**ï¼Œä½†é€šå¸¸å¯ä»¥å®‰å…¨åœ°å¿½ç•¥ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨è¦†ç›–ã€‚

ç„¶åï¼ŒæŒ‰ç…§å…¥é—¨æŒ‡å—ä¸­çš„æè¿°æ­£å¸¸å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ã€‚

ä¸€æ—¦æ‚¨éªŒè¯æ‰€æœ‰æ•°æ®éƒ½å·²è¿ç§»ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„ `docker volume rm` å‘½ä»¤åˆ é™¤æ—§å·ã€‚
