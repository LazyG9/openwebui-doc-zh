---
sidebar_position: 5
title: "ğŸ”„ è¿ç§»"
---

## ä»å†…éƒ¨ LiteLLM è¿ç§»åˆ°å¤–éƒ¨ LiteLLM

Open WebUI çš„æ—©æœŸç‰ˆæœ¬ï¼ˆ0.2 ä¹‹å‰ï¼‰åœ¨å†…éƒ¨è¿è¡Œ `litellm`ã€‚ä¸ºäº†æé«˜æ¨¡å—åŒ–å’Œçµæ´»æ€§ï¼Œæˆ‘ä»¬å»ºè®®åœ¨ç‹¬ç«‹çš„å®¹å™¨ä¸­è¿è¡Œ `litellm`ã€‚æœ¬æŒ‡å—å°†æŒ‡å¯¼æ‚¨å®Œæˆè¿ç§»è¿‡ç¨‹ã€‚

### 1. ä¸‹è½½æ‚¨çš„ `config.yaml` æ–‡ä»¶

åœ¨è¿›è¡Œä»»ä½•æ›´æ”¹ä¹‹å‰ï¼Œè¯·ä» Open WebUI ç®¡ç†è®¾ç½®çª—å£ä¸‹è½½æ‚¨ç°æœ‰çš„ `config.yaml` æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åŒ…å«æ‚¨å½“å‰çš„ `litellm` é…ç½®ã€‚

![LiteLLM config.yaml ä¸‹è½½](/img/migration_litellm_config.png)

### 2. è¿è¡Œç‹¬ç«‹çš„ `litellm` å®¹å™¨

ä½¿ç”¨ä»¥ä¸‹ `docker run` å‘½ä»¤å¯åŠ¨ä¸“ç”¨çš„ `litellm` å®¹å™¨ï¼š

```bash
docker run -d \
  -p 4000:4000 \
  --name litellm \
  -v ./config.yaml:/app/config.yaml \
  -e LITELLM_MASTER_KEY=your_secret_key \
  --restart always \
  ghcr.io/berriai/litellm:main-latest \
  --config /app/config.yaml --port 4000
```

- å°† `./config.yaml` æ›¿æ¢ä¸ºå·²ä¸‹è½½çš„ `config.yaml` æ–‡ä»¶çš„å®é™…è·¯å¾„
- ä¸º `LITELLM_MASTER_KEY` è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„ API å¯†é’¥ï¼Œä»¥ç¡®ä¿å¯¹æ‚¨çš„ `litellm` å®ä¾‹çš„å®‰å…¨è®¿é—®

### 3. å°† `litellm` è¿æ¥åˆ° Open WebUI

å½“ `litellm` å®¹å™¨å¯åŠ¨å¹¶è¿è¡Œåï¼š

1. è¿›å…¥ Open WebUI è®¾ç½®
2. åœ¨"è¿æ¥"ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„"OpenAI"è¿æ¥
3. å°†åŸºç¡€ URL è®¾ç½®ä¸º `http://host.docker.internal:4000/v1`ï¼ˆå¦‚æœ‰å¿…è¦ï¼Œè¯·è°ƒæ•´ç«¯å£ï¼‰
4. å¯¹äº API å¯†é’¥ï¼Œä½¿ç”¨æ‚¨åœ¨æ­¥éª¤ 2 ä¸­å®šä¹‰çš„ `LITELLM_MASTER_KEY` å€¼ï¼ˆä¾‹å¦‚ï¼š`your_secret_key`ï¼‰

æ­å–œï¼æ‚¨å·²æˆåŠŸè¿ç§»åˆ°å¤–éƒ¨ `litellm` è®¾ç½®ï¼Œè¿™å°†æé«˜æ‚¨çš„ Open WebUI å®‰è£…çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## ä» Ollama WebUI è¿ç§»åˆ° Open WebUI

ç”±äºæœ€è¿‘ä» [Ollama WebUI æ›´åä¸º Open WebUI](https://github.com/open-webui/open-webui/discussions/602)ï¼ŒDocker é•œåƒå·²è¢«é‡å‘½åã€‚å¯¹äºä¹‹å‰ä½¿ç”¨ Ollama WebUI å¹¶å¸Œæœ›å¼€å§‹ä½¿ç”¨æ–°é•œåƒçš„ç”¨æˆ·ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹é¢å¤–æ­¥éª¤ã€‚

## ä¸ä¿ç•™æ•°æ®æ›´æ–°åˆ° Open WebUI

å¦‚æœæ‚¨æƒ³æ›´æ–°åˆ°æ–°é•œåƒä½†ä¸éœ€è¦ä¿ç•™ä¹‹å‰çš„æ•°æ®ï¼ˆå¦‚å¯¹è¯è®°å½•ã€æç¤ºè¯ã€æ–‡æ¡£ç­‰ï¼‰ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

:::danger

è­¦å‘Šï¼šæ‰§è¡Œè¿™äº›æ­¥éª¤å°†æ°¸ä¹…åˆ é™¤æ‰€æœ‰å½“å‰é…ç½®é€‰é¡¹ã€èŠå¤©å†å²ç­‰æ•°æ®ã€‚ç³»ç»Ÿä»…ä¼šä¿ç•™å·²ä¸‹è½½çš„ LLM æ¨¡å‹ã€‚

:::

```bash
docker rm -f ollama-webui
docker pull ghcr.io/open-webui/open-webui:main
[æ’å…¥æ‚¨ä½¿ç”¨æ–° Docker é•œåƒåç§°å®‰è£…æ—¶ä½¿ç”¨çš„ç­‰æ•ˆå‘½ä»¤]
docker volume rm ollama-webui
```

ä¾‹å¦‚ï¼Œå¯¹äºæœ¬åœ°å®‰è£…ï¼Œå‘½ä»¤ä¸ºï¼š`docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main`ã€‚å…¶ä»–å®‰è£…å‘½ä»¤è¯·å‚è€ƒæœ¬æ–‡æ¡£çš„ç›¸å…³éƒ¨åˆ†ã€‚

## ä¿ç•™æ•°æ®æ›´æ–°åˆ° Open WebUI

å¦‚æœæ‚¨æƒ³æ›´æ–°åˆ°æ–°é•œåƒå¹¶åŒæ—¶è¿ç§»æ‰€æœ‰ä¹‹å‰çš„è®¾ç½®ï¼ˆåŒ…æ‹¬å¯¹è¯è®°å½•ã€æç¤ºè¯ã€æ–‡æ¡£ç­‰ï¼‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```bash
docker rm -f ollama-webui
docker pull ghcr.io/open-webui/open-webui:main
# åˆ›å»ºæ–°æ•°æ®å·å¹¶ä½¿ç”¨ä¸´æ—¶å®¹å™¨ä»æ—§æ•°æ®å·å¤åˆ¶åˆ°æ–°æ•°æ®å·
docker volume create --name open-webui
docker run --rm -v ollama-webui:/from -v open-webui:/to alpine ash -c "cd /from ; cp -av . /to"
[æ’å…¥æ‚¨ä½¿ç”¨æ–° Docker é•œåƒåç§°å®‰è£…æ—¶ä½¿ç”¨çš„ç­‰æ•ˆå‘½ä»¤]
```

ç¡®è®¤æ‰€æœ‰æ•°æ®éƒ½å·²æˆåŠŸè¿ç§»åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤æ—§çš„æ•°æ®å·ï¼š

```bash
docker volume rm ollama-webui
```

### ä»æœ¬åœ° Git ä»“åº“è¿ç§»

å¦‚æœæ‚¨ä¹‹å‰æ˜¯é€šè¿‡ git ä»“åº“å®‰è£…å¹¶ä½¿ç”¨ `docker compose up` å¯åŠ¨çš„ï¼Œæ‚¨çš„æ•°æ®å·åç§°ä¼šä»¥é¡¹ç›®æ–‡ä»¶å¤¹åä¸ºå‰ç¼€ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„ OpenWebUI è·¯å¾„æ˜¯ï¼š`/home/myserver/ollama-webui/`ï¼Œåˆ™æ•°æ®å·åç§°å°†æ˜¯ "ollama-webui_open-webui" å’Œ "ollama-webui_ollama"ã€‚

è¦å°†å†…å®¹è¿ç§»åˆ°æ ‡å‡†çš„ docker å®‰è£…ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹è¿ç§»å‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š

```bash
docker rm -f open-webui
docker rm -f ollama
docker pull ghcr.io/open-webui/open-webui:main
docker pull ghcr.io/open-webui/open-webui:ollama
docker volume create --name open-webui
docker volume create --name ollama
docker run --rm -v ollama-webui_open-webui:/from -v open-webui:/to alpine ash -c "cd /from ; cp -av . /to"
docker run --rm -v ollama-webui_ollama:/from -v ollama:/to alpine ash -c "cd /from ; cp -av . /to"
```

æ³¨æ„ï¼šæ ¹æ®æ‚¨çš„å®‰è£…æƒ…å†µï¼ŒæŸäº›å‘½ä»¤**å¯èƒ½ä¼šæ˜¾ç¤ºé”™è¯¯**ï¼Œä½†ç”±äºæˆ‘ä»¬æ˜¯åœ¨æ‰§è¡Œè¦†ç›–æ“ä½œï¼Œè¿™äº›é”™è¯¯é€šå¸¸å¯ä»¥å®‰å…¨å¿½ç•¥ã€‚

å®Œæˆåï¼Œè¯·æŒ‰ç…§å…¥é—¨æŒ‡å—ä¸­çš„è¯´æ˜æ­£å¸¸å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ã€‚

ç¡®è®¤æ‰€æœ‰æ•°æ®è¿ç§»æˆåŠŸåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸Šè¿°çš„ `docker volume rm` å‘½ä»¤åˆ é™¤æ—§çš„æ•°æ®å·ã€‚
